<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<title>PHP笔记&middot; Madiks&#39;s blog</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="madiks">
	<meta name="description" content="A programmer live in China, like writing and drawing.">
	<meta name="keywords" content="programmer, blog, note">
	<meta name="generator" content="Hugo 0.16" />

	<!-- CSS -->
	<link rel="stylesheet" href="https://madiks.github.iocss/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="https://madiks.github.iofavicon.ico" type="image/x-icon">

	<!-- RSS -->
	

	<!-- Font Awesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google Fonts -->
	<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/default.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <header class="site-header">
	<div class="branding">
		<a href="https://madiks.github.io">
		<img class="avatar" src="https://madiks.github.ioimg/avatar.png" alt=""/>
		</a>
		<h1 class="site-title">
			<a href="https://madiks.github.io">Madiks&#39;s blog</a>
		</h1>
	</div>
	<nav class="site-nav">
		<ul>
	      	<li><a href="/about/"> About </a></li>

	      	<li>
	<a href="https://madiks.github.io" title="">
		<i class="fa fa-fw fa-home"></i>
	</a>
</li>

<li>
	<a href="https://madiks.github.ioindex.xml" title="Subcribe">
		<i class="fa fa-fw fa-rss"></i>
	</a>
</li>

<li>
	<a href="mailto:madisvs@gmail.com" title="Email">
		<i class="fa fa-fw fa-envelope"></i>
	</a>
</li>











<li>
	<a href="https://github.com/madiks" title="GitHub">
		<i class="fa fa-fw fa-github"></i>
	</a>
</li>



<li>
	<a href="http://instagram.com/madisvs" title="Instagram">
		<i class="fa fa-fw fa-instagram"></i>
	</a>
</li>











<li>
	<a href="http://steamcommunity.com/id/masvs" title="Steam">
		<i class="fa fa-fw fa-steam"></i>
	</a>
</li>









	    </ul>
	</nav>
</header>


    <div class="content">
    <article>
		<header>
			<h1 class="title">PHP笔记</h1>
			<p class="meta">
    April 23, 2017 &middot; 1 minute read

    
        &middot; Tags:
            <a href="https://madiks.github.iotags/note">note</a>
            , <a href="https://madiks.github.iotags/php">php</a>
            
</p>

		</header>

	<section class="post-content">
		

<h3 id="面向对象-oop">面向对象 OOP</h3>

<p>面向对象程序设计（Object-Oriented Programming，OOP）是一种程序设计范性，同时也是一种程序开发方法。它将对象作为程序的基本单元，将程序和数据封装其中，以提代码的<strong>重用性</strong>、<strong>灵活性</strong>和<strong>可扩展性</strong>。</p>

<p>面向对象的核心思想是对象、封装、可重用和可扩展性。</p>

<p><strong>类是对象的抽象组织，对象是类的具体存在。</strong></p>

<h3 id="php对象的本质">PHP对象的本质</h3>

<p>先看PHP5中变量的定义：</p>

<pre><code class="language-C">#zend/zend.h

typedef union _zvalue_value {
    long lval; //整形
    double dval; //浮点数
    struct {
        char *val;
        int len;
    } str; //字符串
    HashTable *ht; //数组
    zend_object_value obj; //对象
} zvalue_value;

struct _zval_struct {
	/* Variable information */
	zvalue_value value;		/* value */
	zend_uint refcount__gc;
	zend_uchar type;	/* active type */
	zend_uchar is_ref__gc;
};

</code></pre>

<p>从源码可知php对象的类型是zend_object_value，接下来看它是如何实现的：</p>

<pre><code class="language-C">#zend/zend.h

typedef struct _zend_object {
    zend_class_entry *ce; //类指针，指向对象对应的类
    HashTable *properties; //存放对象的属性表
    HashTable *guards; 
    /* protects from __get/__set ... recursion */
} zend_object;
</code></pre>

<p>PHP对象：</p>

<ul>
<li>属性数组（哈希表）</li>

<li><p>类指针</p>

<ul>
<li>类属性</li>
<li>静态属性</li>
<li>类常量</li>
<li>标准方法</li>
<li>魔术方法</li>
<li>自定义方法</li>
</ul></li>
</ul>

<p>对象也是一种普通的变量，不同的是其携带了对象的属性表和类的入口指针。</p>

<p>于是可以总结PHP中对象和类的概念以及二者之间的关系：</p>

<ul>
<li>类是定义一系列属性和操作的模版，而对象则把属性进行具体化，然后交给类处理</li>
</ul>

	</section>
    </div>

    <footer class="site-footer">
	<p class="text">&copy; 2017 - 20XX • All rights reserved.<br>Powered by <a href="//gohugo.io/">Hugo</a> with the <a href="//github.com/digitalcraftsman/hugo-type-theme">Type Theme</a></p>
</footer>


</body>
</html>
